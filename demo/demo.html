<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>NetProtect - check status</title>

  <!-- Styles -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  <!-- @end Styles -->

  <style>
    #main {
      padding: 30px 30px 150px 30px;
    }
    .help {
      cursor: pointer;
      color: #aaa;
    }
    h4 {
      margin-top: 30px;
    }
    hr {
      margin: 30px 0;
    }
    #status span {
      text-transform: capitalize;
    }
  </style>

</head>
<body>

<nav class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container">

    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
              aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://netprotect.com"><i class="fa fa-globe fa-lg"></i> NetProtect</a>

      <p class="navbar-text">Check Status</p>
    </div>

    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Demo</a></li>
        <li><a href="http://netprotect.com" target="_blank" class="external"><i class="fa fa-external-link"></i>
          NetProtect.com</a></li>
      </ul>
    </div>

  </div>
</nav>

<div id="main" class="container">
  
  <div class="panel panel-default">
    <div class="panel-body">
    
      <form role="form">
    
        <div class="row">
          <div class="col-md-10">
            <div class="form-group">
              <input type="email" class="form-control" id="account-email" placeholder="Enter your email" value="me@email.com" />
            </div>
          </div>
          <div class="col-md-2">
            <a id="refresh-status" class="btn btn-default">Check status</a>
          </div>
        </div>
    
      </form>
    
      <hr>
    
      <div id="status" class="row">
    
        <div id="account-status" class="col-md-4">
          <i data-container="body" data-toggle="popover" data-placement="right" data-content="Account status on our server, ie expired, active or cancelled" class="fa fa-question-circle fa-lg help"></i>
          <label>Status:</label> 
          <span></span>
        </div>

        <div id="account-dns" class="col-md-4">
          <i data-container="body" data-toggle="popover" data-placement="right" data-content="Whether the device has our DNS setup correctly or not" class="fa fa-question-circle fa-lg help"></i>
          <label>DNS:</label>
          <span></span>
        </div>
        
        <div id="account-ip" class="col-md-4">
          <i data-container="body" data-toggle="popover" data-placement="right" data-content="Last update account IP address" class="fa fa-question-circle fa-lg help"></i>
          <label>IP:</label>
          <span></span>
        </div>
        
      </div>
    
    </div>
  </div>
  
  <hr>

  <a href="#" class="toggle" data-target="#docs">Toggle Docs</a>

  <div id="docs" class="remove-hidden">

    <h2>UU.js</h2>
    
    <p>A jQuery plugin to get the status of a NetProtect user account.</p>
    
    <hr>
    
    <h2>Getting started</h2>
    
    <h4>1: Create the HTML element(s)</h4>
    
    <p>Create the placeholder elements on the page which you want to use to show the status feedback (ie account status)</p>

    <?prettify lang=html ?>
    <pre class="prettyprint">&lt;div id=&quot;account-status&quot;&gt;&lt;/div&gt;</pre>

    <h4>2: Initiate the plugin</h4>
    
    <p>Include the jQuery (version 1.7+) and the UU.js plugins on your page</p>
    
    <?prettify lang=javascript ?>
    <?prettify lang=html ?>
    <pre class="prettyprint">&lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;/path/to/js-assets/jquery.uu.js&quot;&gt;&lt;/script&gt;</pre>
    
    <p>And initialize the plugin:</p>
    
    <?prettify lang=javascript ?>
      <pre class="prettyprint">var uuJS = new $.UUJS();</pre>
    
    <h4>3: Subscribe the new elements</h4>

    <p>You can either subscribe to a single event:</p>
    
    <?prettify lang=javascript ?>
      <pre class="prettyprint">var handler = uuJS.subscribe('onSuccess', function(data) {
  $('#account-status').html(data.status);
});</pre>

    <p>or subscribe an entire object with all the events:</p>
    
    <?prettify lang=javascript ?>
      <pre class="prettyprint">
var obj = {
   
  onStart: function () {
    // Do something here when the check service starts
  },
  
  onSuccess: function (data) {
    // Do something here when the response is successful
  },
  
  onFail: function (xhr, status, error) {  
    // Show errors here if the response fails
  },
  
  anotherMethod: function(v) {
    // You can have more attributes or functions, the plugin will ignore them   
  }
        
  // Subscribe the object        
  handler = uuJS.subscribe(obj);
      
};</pre>

    <h4>4: Trigger the account status call</h4>
    
    <p>Finally call the get status on the plugin and you should be able to see the result in the placeholder</p>

    <?prettify lang=javascript ?>
      <pre class="prettyprint">
uuJS.status({ email: email });</pre>
    
    <p>You will get a similar response to the following one from the server:</p>
    
    <?prettify lang=javascript ?>
      <pre class="prettyprint">{ "email":"user@email.com" , "status":"active" , "ip":"90.104.192.255" , "is_known":true , "is_active":true , "our_dns":false , "eguess":"u***@email.com" , "ip_changed":true , "reactivated":false , "secure":"0" , "accepted":true }</pre>

    <p>You may also unsubscribe an element at anytime by calling the following method:</p>

    <?prettify lang=javascript ?>
      <pre class="prettyprint">
uuJS.unsubscribe(handler);</pre>
    
    <hr>
    
    <h2>$().UUJS(options)</h2>
    
    <p>Account status jQuery plugin</p>
    
    <div role="tabpanel">
    
      <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#options" aria-controls="options" role="tab" data-toggle="tab">Options</a></li>
        <li role="presentation"><a href="#methods" aria-controls="methods" role="tab" data-toggle="tab">Methods</a></li>
      </ul>
    
      <!-- Tab panes -->
      <div class="tab-content">
        
        <div role="tabpanel" class="tab-pane active" id="options">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Default</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Timeout</td>
                <td>Number</td>
                <td>3000</td>
                <td>Time in milliseconds before retrying to call the end point again in case of time out</td>
              </tr>
              <tr>
                <td>Retry</td>
                <td>Number</td>
                <td>3</td>
                <td>Number of times plugin should retry to call the end point in case of time out</td>
              </tr>
              <tr>
                <td>url</td>
                <td>String</td>
                <td>http://check.netprotect.com/get-status.js</td>
                <td>Default API end point address to get and set the account status</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div role="tabpanel" class="tab-pane" id="methods">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Method</th>
                <th>Parameters</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>subscribe</td>
                <td><strong>event</strong> string | object [,<strong>callback</strong> function]</td>
                <td>Add the function or an object to the list of subscribers to a particular event</td>
              </tr>
              <tr>
                <td>unsubscribe</td>
                <td><strong>handler</strong> object</td>
                <td>Unsubscribe the subscriber from a particular event</td>
              </tr>
            </tbody>
          </table>
        </div>
        
      </div>
    
    </div>    
    
  </div>

</div>

<nav class="navbar navbar-default navbar-fixed-bottom" role="navigation">
  <div class="container">
    <div id="status-bar" class="navbar-text"><p>Ready</p></div>

    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Log <span class="caret"></span></a>
        <ul id="log" class="dropdown-menu" role="menu">
          <li role="presentation" class="dropdown-header">Ready</li>
          <li class="divider"></li>
        </ul>
      </li>
    </ul>

    <p class="navbar-text navbar-right">v. 0.0.2</p>

  </div>
</nav>

<!-- Scripts -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="//google-code-prettify.googlecode.com/svn/loader/run_prettify.js?skin=desert"></script>

<script src="../src/plugins/jquery.uu.js"></script>
<script src="demo.js"></script>
<!-- @end Scripts -->

</body>
</html>